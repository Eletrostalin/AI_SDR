from langchain.prompts import ChatPromptTemplate

# 1. –ü—Ä–æ–º—Ç –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ –ø–æ–∂–µ–ª–∞–Ω–∏–π —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
invite_prompt = ChatPromptTemplate.from_template("""
–¢—ã AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç. –ü–æ–ø—Ä–æ—Å–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Ç–∞–∫—Ç–∏—á–Ω–æ –≤–≤–µ—Å—Ç–∏ –ø–æ–∂–µ–ª–∞–Ω–∏—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —à–∞–±–ª–æ–Ω–æ–≤ –ø–∏—Å—å–º–∞. 
–§–æ—Ä–º—É–ª–∏—Ä—É–π –ø—Ä–æ—Å—å–±—É –ø–æ-—Ä–∞–∑–Ω–æ–º—É –∫–∞–∂–¥—ã–π —Ä–∞–∑, —á—Ç–æ–±—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∑–∞–º–µ—á–∞–ª –æ–¥–Ω–æ—Ç–∏–ø–Ω–æ—Å—Ç–∏.
–û—Ç–≤–µ—á–∞–π —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–æ–π —Ç–µ–∫—Å—Ç–∞ –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä JSON –∏–ª–∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö.
""")

# 2. –ü—Ä–æ–º—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞ (–µ—Å–ª–∏ —Å–Ω–æ–≤–∞ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è)
context_analysis_prompt = ChatPromptTemplate.from_template("""
–ú—ã –æ–∂–∏–¥–∞–µ–º —Ç–µ–∫—Å—Ç —Å –ø–æ–∂–µ–ª–∞–Ω–∏—è–º–∏ –¥–ª—è —à–∞–±–ª–æ–Ω–∞ –ø–∏—Å—å–º–∞. –¢–µ–∫—Å—Ç: {input}

–ï—Å–ª–∏ —Ç–µ–∫—Å—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –æ–∂–∏–¥–∞–Ω–∏—è–º, –æ—Ç–≤–µ—Ç—å "valid".
–ï—Å–ª–∏ —Ç–µ–∫—Å—Ç –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç, –æ—Ç–≤–µ—Ç—å "invalid" –∏ –∫—Ä–∞—Ç–∫–æ –æ–±—ä—è—Å–Ω–∏, –ø–æ—á–µ–º—É.
""")

# 3. –ü—Ä–æ–º—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–∏—Å—å–º–∞ —Å —É—á—ë—Ç–æ–º –∫–æ–º–ø–∞–Ω–∏–∏ –∏ –∫–æ–Ω—Ç–µ–Ω—Ç–Ω–æ–≥–æ –ø–ª–∞–Ω–∞
template_generation_prompt = ChatPromptTemplate.from_template("""
–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π —Ç–µ–∫—Å—Ç –ø–∏—Å—å–º–∞ –¥–ª—è –∫–æ–º–ø–∞–Ω–∏–∏ "{company_name}" (—Å—Ñ–µ—Ä–∞: {industry}).

–ö–æ–Ω—Ç–µ–Ω—Ç–Ω—ã–π –ø–ª–∞–Ω: {content_plan}
–¢–µ–º–∞ –ø–∏—Å—å–º–∞: {subject}

–ü–æ–∂–µ–ª–∞–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
{user_request}

–û—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å—Ç—Ä–æ–≥–æ –Ω–∞ —Ä—É—Å—Å–∫–æ–º
""")

template_edit_prompt = ChatPromptTemplate.from_template("""
–¢—ã ‚Äì –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä email-—Ä–∞—Å—Å—ã–ª–æ–∫. –¢–≤–æ—è –∑–∞–¥–∞—á–∞ ‚Äì –≤–Ω–µ—Å—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —à–∞–±–ª–æ–Ω –ø–∏—Å—å–º–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

**–ò—Å—Ö–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç –ø–∏—Å—å–º–∞**:
{current_template}

‚úè**–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**:
{comments}

**–¢–≤–æ—è –∑–∞–¥–∞—á–∞**:
- –°–æ—Ö—Ä–∞–Ω–∏ —Å—Ç–∏–ª—å –∏ —Å—É—Ç—å –ø–∏—Å—å–º–∞.
- –£—á–∏—Ç—ã–≤–∞–π –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
- –ù–µ –¥–æ–±–∞–≤–ª—è–π –ª–∏—à–Ω—é—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é.
- –û—Ç–≤–µ—á–∞–π **—Ç–æ–ª—å–∫–æ –Ω–æ–≤—ã–º —Ç–µ–∫—Å—Ç–æ–º –ø–∏—Å—å–º–∞**, –±–µ–∑ –ø–æ—è—Å–Ω–µ–Ω–∏–π.

üìù **–ù–æ–≤—ã–π —Ç–µ–∫—Å—Ç –ø–∏—Å—å–º–∞**:
""")

def generate_email_template_prompt(company_details: dict) -> str:
    """
    –§–æ—Ä–º–∏—Ä—É–µ—Ç –ø—Ä–æ–º—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ email-—à–∞–±–ª–æ–Ω–∞ —Å —É—á–µ—Ç–æ–º –∑–∞–ø—Ä–µ—Ç–∞ –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ —Å–ª–æ–≤–∞.

    :param company_details: –°–ª–æ–≤–∞—Ä—å —Å –¥–µ—Ç–∞–ª—è–º–∏ –æ –∫–æ–º–ø–∞–Ω–∏–∏ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º –∑–∞–ø—Ä–æ—Å–æ–º.
    :return: –¢–µ–∫—Å—Ç–æ–≤—ã–π –ø—Ä–æ–º—Ç.
    """
    forbidden_words = [
        "–ù–∞–∂–º–∏ —Å—é–¥–∞!", "–ü–æ–ª—É—á–∏–ª–∏ –º–∏–ª–ª–∏–æ–Ω –∑–∞ –º–∏–Ω—É—Ç—É!", "–±–µ—Å–ø–ª–∞—Ç–Ω–æ", "–ø—Ä–∏–±—ã–ª—å", "–ø—Ä–æ—Ñ–∏—Ç", "100%", "0%",
        "–ø–æ–ª—É—á–∏ –±–µ—Å–ø–ª–∞—Ç–Ω–æ", "–§–∏–Ω–∞–Ω—Å–æ–≤—ã–π —É—Å–ø–µ—Ö", "–î–µ–Ω—å–≥–∏", "–ö—Ä–µ–¥–∏—Ç", "–ñ–º–∏", "–ö–ª–∏–∫–Ω–∏", "–ö—É–ø–∏", "–°–∫–∞—á–∞–π",
        "–•–æ—Ç–∏—Ç–µ –ø–æ–ª—É—á–∞—Ç—å 1000 –¥–æ–ª–ª–∞—Ä–æ–≤ –≤ –¥–µ–Ω—å?", "–°–∫–∞—á–∞–π –±–µ—Å–ø–ª–∞—Ç–Ω–æ!", "–ü–æ–¥–∞—Ä–æ–∫!",
        "–î–∞—Ä–∏–º –ø—Ä–µ–∑–µ–Ω—Ç, –µ—Å–ª–∏ –æ—Ç–∫—Ä–æ–µ—Ç–µ –ø–∏—Å—å–º–æ!", "–ü–æ—Ö—É–¥–µ–Ω–∏–µ", "–õ–µ–∫–∞—Ä—Å—Ç–≤–∞", "–ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∞—è —Å—Ç—Ä–∞—Ö–æ–≤–∫–∞",
        "–°–∫–∏–¥–∫–∞", "–ë–µ—Å–ø–ª–∞—Ç–Ω–æ", "–í—ã–∏–≥—Ä–∞–π—Ç–µ", "–ê–∫—Ü–∏—è", "–õ–µ–≥–∫–æ –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å",
        "–ù–µ —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫—Ä–µ–¥–∏—Ç–Ω–æ–π –∏—Å—Ç–æ—Ä–∏–∏", "–ì–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ", "–ù–µ –ø–æ—Ç–µ—Ä—è–π—Ç–µ —Å–≤–æ–π —à–∞–Ω—Å",
        "–í–∑—Ä–æ—Å–ª—ã–µ", "–°–µ–∫—Å", "–í—ã–∏–≥—Ä–∞–ª–∏ –ª–æ—Ç–µ—Ä–µ—é", "–ù–∞—Å–ª–µ–¥—Å—Ç–≤–æ –æ—Ç –Ω–µ–∑–Ω–∞–∫–æ–º—Ü–∞", "–ü–æ–º–æ—â—å –≤ –ø–æ–ª—É—á–µ–Ω–∏–∏ –∫—Ä–µ–¥–∏—Ç–∞"
    ]

    return (
        f"–¢—ã ‚Äì AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç, —Å–æ–∑–¥–∞—é—â–∏–π email-—à–∞–±–ª–æ–Ω—ã –¥–ª—è –∫–æ–º–ø–∞–Ω–∏–π. –£—á–∏—Ç—ã–≤–∞–π —Å–ª–µ–¥—É—é—â—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é:\n\n"
        f"- –ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏: {company_details.get('company_name')}\n"
        f"- –ú–∏—Å—Å–∏—è –∫–æ–º–ø–∞–Ω–∏–∏: {company_details.get('company_mission')}\n"
        f"- –¶–µ–Ω–Ω–æ—Å—Ç–∏ –∫–æ–º–ø–∞–Ω–∏–∏: {company_details.get('company_values')}\n"
        f"- –û—Ç—Ä–∞—Å–ª—å: {company_details.get('business_sector')}\n"
        f"- –ê–¥—Ä–µ—Å–∞ –∏ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã: {company_details.get('office_addresses_and_hours')}\n"
        f"- –°—Å—ã–ª–∫–∏ –Ω–∞ —Ä–µ—Å—É—Ä—Å—ã: {company_details.get('resource_links')}\n"
        f"- –¶–µ–ª–µ–≤–∞—è –∞—É–¥–∏—Ç–æ—Ä–∏—è –∏ –≥–µ–æ–≥—Ä–∞—Ñ–∏—è: {company_details.get('target_audience_b2b_b2c_niche_geography')}\n"
        f"- –£–¢–ü: {company_details.get('unique_selling_proposition')}\n"
        f"- –ë–æ–ª–∏ –∫–ª–∏–µ–Ω—Ç–æ–≤: {company_details.get('customer_pain_points')}\n"
        f"- –û—Ç–ª–∏—á–∏—è –æ—Ç –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–æ–≤: {company_details.get('competitor_differences')}\n"
        f"- –ü—Ä–æ–¥—É–∫—Ç—ã –∏ —É—Å–ª—É–≥–∏: {company_details.get('promoted_products_and_services')}\n"
        f"- –î–æ—Å—Ç–∞–≤–∫–∞ –∏ –ø–æ–∫—Ä—ã—Ç–∏–µ: {company_details.get('delivery_availability_geographical_coverage')}\n"
        f"- FAQ: {company_details.get('frequently_asked_questions_with_answers')}\n"
        f"- –¢–∏–ø–∏—á–Ω—ã–µ –≤–æ–∑—Ä–∞–∂–µ–Ω–∏—è –∫–ª–∏–µ–Ω—Ç–æ–≤ –∏ –æ—Ç–≤–µ—Ç—ã: {company_details.get('common_customer_objections_and_responses')}\n"
        f"- –£—Å–ø–µ—à–Ω—ã–µ –∫–µ–π—Å—ã: {company_details.get('successful_case_studies')}\n"
        f"- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è: {company_details.get('additional_information')}\n\n"
        f"–ö–æ–Ω—Ç–µ–Ω—Ç-–ø–ª–∞–Ω:\n"
        f"- {company_details.get('content_plan_description')}\n\n"
        f"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ—Å–∏—Ç —Å–æ–∑–¥–∞—Ç—å —à–∞–±–ª–æ–Ω —Å —É—á–µ—Ç–æ–º —Å–ª–µ–¥—É—é—â–∏—Ö –ø–æ–∂–µ–ª–∞–Ω–∏–π:\n"
        f"\"{company_details.get('user_request')}\"\n\n"
        f"**–¢–≤–æ—è –∑–∞–¥–∞—á–∞:**\n"
        f"- –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π email-—à–∞–±–ª–æ–Ω –±–µ–∑ —Ç–µ–º—ã –ø–∏—Å—å–º–∞.\n"
        f"- **–°—Ç—Ä–æ–≥–æ –∑–∞–ø—Ä–µ—â–µ–Ω–æ** –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ —Å–ª–æ–≤–∞ –∏–ª–∏ –∏—Ö –≤–∞—Ä–∏–∞—Ü–∏–∏:\n"
        f"  {', '.join(forbidden_words)}.\n"
        f"- –®–∞–±–ª–æ–Ω –¥–æ–ª–∂–µ–Ω –≤—ã–≥–ª—è–¥–µ—Ç—å –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ.\n"
    )